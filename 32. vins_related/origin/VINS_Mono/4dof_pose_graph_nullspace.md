<!--
 * @Author: Liu Weilong
 * @Date: 2021-05-13 13:33:48
 * @LastEditors: Liu Weilong 
 * @LastEditTime: 2021-05-13 14:39:02
 * @FilePath: /Codes/32. vins_related/origin/VINS_Mono/4dof_pose_graph_nullspace.md
 * @Description: 
-->
### 一些关于零空间和VINS 的思考
1. VINS中的4自由度优化的目的是什么？
   
   分摊误差、通过更多内部的约束，让点云地图、相机状态，达到一种内部平衡的关系。

2. 位姿图优化的四个自由度和VINS 系统的4个自由度有关系吗？
   
   是有关系的。
   
   VINS 系统的四自由度是直接从可观性分析上得到的，也就是说 Camera的平移 点云的位置 只是和第一帧相关，但是第一帧位置不固定。只要第一帧位置的位置初始化变动(i.e. $t^{c_1}_w$ = [0 0 0] 变化为 $t^{c_1}_w$ = [0.232 12312.323 435.54])，那么相机的平移和点云的位置都会跟着进行平移。
   
   同样yaw角的旋转也会出现这个问题。
   
   但是 pitch 和 roll 因为 gravity 的原因 9.81 在空间中引入了地球坐标系的信息，所以就不会出现 以上的问题，相当于 pitch 和 yaw 是
   和 世界坐标系是直接相关的

   那么位姿图优化为什么是4个自由度呢？

   这一点可以从 supplement/observability_analysis/basic_observability.md 补充1. 可以知道， 因为 pitch 和 roll 对于系统可观，直接导致 Ax=b 的这个方程在求解的时候，会想办法把pitch 和roll 的误差压到最小。
   另外一种理解说， pitch roll 是有大权重变量， 平移和yaw 属于无权重变量。所以从 可观性 Ax=b 的方程可以知道， 平移和yaw 有极大的不确定性。

   但是对于 位移和 yaw 并没有这种约束，因为他们直接反映在零空间中。scalar大小变化不会对问题求解产生变化。
   因为根本不可观，所以只能通过内部约束，让他们达成一种地图一致性的平衡。这里也就是回环的重要性，建立和老帧之间的关系，大家一起平摊误差

   当然一起优化也是可以的，pitch yaw 继续分摊误差就是了，这里可能更多的是为了精度和计算之间的权衡
   
3. 为什么VINS 使用FEJ的效果并没有很大提升？
   
   FEJ的本质问题，我目前认为是估计值并不够高的导致的，因为如果估计值足够高接近真值，那么FEJ的方法不使用，零空间也能够维护的住。这里也就是回环能够压得住零空间的原因，因为精度在误差平摊之后已经足够高，所以在这个时候再加入FEJ的方法并不能有一个很大的提升。

4. FEJ 在优化中的使用我还是没有真正地理解，目前只是大概之后是为了维护零空间
   


